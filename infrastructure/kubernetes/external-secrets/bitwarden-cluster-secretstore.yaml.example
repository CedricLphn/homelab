apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: bitwarden-cluster-secretstore
spec:
  provider:
    bitwardensecretsmanager:
      apiURL: https://api.bitwarden.com
      identityURL: https://identity.bitwarden.com
      bitwardenServerSDKURL: https://bitwarden-sdk-server.external-secrets-system.svc.cluster.local:9998
      organizationID: <YOUR-ORGANIZATION-ID>  # Get from Bitwarden Secrets Manager
      projectID: <YOUR-PROJECT-ID>            # Get from Bitwarden Secrets Manager
      auth:
        secretRef:
          credentials:
            key: token
            name: bitwarden-access-token
            namespace: external-secrets-system
      caBundle: <BASE64-ENCODED-CA-CERTIFICATE>  # From bitwarden-sdk-server certificate
      # To get CA bundle:
      # kubectl get secret bitwarden-sdk-server-tls -n external-secrets-system \
      #   -o jsonpath='{.data.ca\.crt}'
